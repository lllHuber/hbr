System.register(["singletons/authService","aurelia-framework","aurelia-fetch-client","aurelia-event-aggregator","jquery"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,i,a,s,u,o,r,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();return{setters:[function(e){n=e["default"]},function(e){i=e.inject,a=e.computedFrom},function(e){s=e.HttpClient},function(e){u=e.EventAggregator},function(e){o=e["default"]}],execute:function(){r=function(){function e(e,n,i,a){t(this,r),this.http=i,this.auth=e,this.ea=a,this.currentYear=(new Date).getFullYear(),this.username="",this.password=""}l(e,[{key:"attached",value:function(){this.ea.subscribe("credentialsChange",this.toggleLoginButton.bind(this));o("input[name=userPassword]").keyup(this.checkForEnter.bind(this))}},{key:"detached",value:function(){this.auth.response=""}},{key:"enableLoginButton",value:function(){o(".lstvLoginButton").addClass("unlocked").prop("disabled",!1)}},{key:"disableLoginButton",value:function(){o(".lstvLoginButton").removeClass("unlocked").prop("disabled",!0)}},{key:"publishCredentialsChange",value:function(){this.credentials={username:this.username,password:this.password},this.ea.publish("credentialsChange",this.credentials)}},{key:"checkForEnter",value:function(e){13==e.keyCode&&this.sendCredentials()}},{key:"sendCredentials",value:function(){this.auth.login(this.credentials)}},{key:"toggleLoginButton",value:function(e){""!=e.username&&""!=e.password?this.enableLoginButton():this.disableLoginButton()}}]);var r=e;return e=i(n,s,a,u)(e)||e}(),e("Login",r)}}});